<ion-header>
  <ion-toolbar>
    <ion-title class="ion-text-center">
      <img routerLink="/auth/login" src="../../../assets/images/back.png" alt="" height="15px">   {{ "REGISTER.title" | translate }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-text-center">
  <ion-fab slot="fixed" vertical="top" horizontal="end" >
    <ion-fab-button color="primary" class="custom-fab-button" (click)="scan()">
      <img src="../../../assets/images/qr.png" style="padding:10px;" alt=""> 
  </ion-fab-button>
  </ion-fab>

  <br><br>
  <div>
    <img class="ion-text-center" src="../../../assets/images/user-icon.png" style="height: 80px;" alt="">
    <br><br>
    <ion-card>
      <ion-card-content>
        {{ "REGISTER.anon_text" | translate }}<br>
      </ion-card-content>
      <ion-toggle [ngModel]="clienteAnonimo" (ionChange)="toggleAnonimo($event)">{{ "REGISTER.anon_switch" | translate }}</ion-toggle><br /><br />
    </ion-card>

    <ion-card>
      <form [formGroup]="form" (ngSubmit)="enviarInformacion()">
        <ion-item>
          <ion-label position="stacked">{{ "REGISTER.first_name" | translate }}</ion-label>
          <ion-input formControlName="nombre"></ion-input>
        </ion-item>
        <div *ngIf="form.controls['nombre'].invalid && form.controls['nombre'].touched" class="error-message">
          {{ "VALIDATORS.usr_name_invalid" | translate }}
        </div>

        <ion-item *ngIf="!clienteAnonimo">
          <ion-label position="stacked">{{ "REGISTER.last_name" | translate }}</ion-label>
          <ion-input formControlName="apellido"></ion-input>
        </ion-item>
        <div *ngIf="form.controls['apellido'].invalid && form.controls['apellido'].touched" class="error-message">
          {{ "VALIDATORS.usr_lastname_invalid" | translate }}
        </div>

        <ion-item *ngIf="!clienteAnonimo">
          <ion-label position="stacked">{{ "REGISTER.DNI" | translate }}</ion-label>
          <ion-input formControlName="dni"></ion-input>
        </ion-item>
        <div *ngIf="form.controls['dni'].invalid && form.controls['dni'].touched" class="error-message">
          {{ "VALIDATORS.usr_dni_invalid" | translate }}
        </div>

        <ion-item *ngIf="!clienteAnonimo">
          <ion-label position="stacked">{{ "REGISTER.mail" | translate }}</ion-label>
          <ion-input formControlName="email" type="email"></ion-input>
        </ion-item>
        <div *ngIf="form.controls['email'].invalid && form.controls['email'].touched" class="error-message">
          {{ "VALIDATORS.usr_email_invalid" | translate }}
        </div>
        <ion-item *ngIf="!clienteAnonimo">
          <ion-label position="stacked">{{ "REGISTER.password" | translate }}</ion-label>
          <ion-input formControlName="clave" type="password"></ion-input>
        </ion-item>
        <div *ngIf="form.controls['clave'].invalid && form.controls['clave'].touched" class="error-message">
          {{ "VALIDATORS.usr_password_invalid" | translate }}
        </div>

        <ion-item *ngIf="!clienteAnonimo">
          <ion-label position="stacked">{{ "REGISTER.check_password" | translate }}</ion-label>
          <ion-input formControlName="confirmarClave" type="password"></ion-input>
        </ion-item>
        <div *ngIf="form.hasError('passwordMismatch') && form.controls['confirmarClave'].touched" class="error-message">
          {{ "VALIDATORS.usr_check_password_invalid" | translate }}
        </div>

        <ion-item>
          <ion-label position="stacked">{{ "REGISTER.profile_photo" | translate }}</ion-label>
          <br>
          <ion-button shape="round" (click)="tomarFoto()">
            <img src="../../../assets/images/camera.png" style="height: 30px; padding:3px;" alt="">
            &nbsp;{{ "REGISTER.photo_btn" | translate }}
          </ion-button>
          <br>
        </ion-item>
        <br>
        <ion-button color="success" shape="round" type="submit" [disabled]="form.invalid">{{ "REGISTER.submit_btn" | translate }}</ion-button>
        <ion-button color="danger" shape="round" routerLink="/auth/login">{{ "REGISTER.cancel_btn" | translate }}</ion-button>
        <div *ngIf="mostrarSpinner" class="spinner-container">
          <img src="../../../assets/images/burger-removebg-preview.png" height="70px" alt="">
        </div>
      </form>
      <br><br>
    </ion-card>
  </div>
</ion-content>
