<ion-header>
  <ion-toolbar>
    <ion-title>
      Alta Mesa
    </ion-title>
  </ion-toolbar>

  <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

  <ion-fab slot="fixed" vertical="top" horizontal="end">
    <ion-fab-button >
      <img style="height: 40px; padding: 5px;" src="../../../assets/images/qr.png" alt="">
    </ion-fab-button>
  </ion-fab>
</ion-header>

<ion-content class="ion-padding ion-text-center">
  <br><br>
  <div>
    <img class="ion-text-center" src="../../../assets/images/user-icon.png" style="height: 80px;" alt="">
    <br><br>
    <ion-card>
      <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
        <ion-item>
          <ion-label position="stacked">Número</ion-label>
          <ion-input formControlName="numero" type="number"></ion-input>
        </ion-item>
        <div *ngIf="isValidField('numero')" class="error-message">
          {{ getErrorByField("numero") }}
        </div>

        <ion-item>
          <ion-label position="stacked">Cantidad de Comensales</ion-label>
          <ion-input formControlName="cantidadComensales" type="number"></ion-input>
        </ion-item>
        <div *ngIf="isValidField('cantidadComensales')" class="error-message">
          {{ getErrorByField("cantidadComensales") }}
        </div>

        <ion-item>
          <ion-label position="stacked">Tipo</ion-label>
          <ion-select formControlName="tipo">
            <ion-select-option value="estandar">Estándar</ion-select-option>
            <ion-select-option value="discapacitados">Discapacitados</ion-select-option>
            <ion-select-option value="vip">VIP</ion-select-option>
          </ion-select>
        </ion-item>
        <div *ngIf="isValidField('tipo')" class="error-message">
          {{ getErrorByField("tipo") }}
        </div>



        <ion-item>
          <br>
          <br>
          <div class="photo-container">
            <img *ngIf="rutaImagen" [src]="rutaImagen"  height="100px">
            <ion-button shape="round" (click)="takePhoto()" class="photo-button">
              <img src="../../../assets/images/camera.png" style="height: 30px; padding:3px;" alt="">
              &nbsp;Tomar foto
            </ion-button>
          </div>
          <br>
          <br>
        </ion-item>
        <ion-button class="ion-padding" color="success" expand="block" type="submit"  [disabled]="myForm.invalid || !rutaImagen">
          Aceptar
        </ion-button>
        <ion-button class="ion-padding" color="danger" expand="block" routerLink="/auth/login">Cancelar</ion-button>
      </form>
      <br><br>
    </ion-card>
  </div>
</ion-content>
